<!doctype html>
<html>
        <head>
                <meta charset="utf-8">
                <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700|Roboto+Condensed:700|Material+Icons" rel="stylesheet" type="text/css">
                <link href="https:////static.bab.la/css/bab1-1822.css" rel="stylesheet" type="text/css">
        </head>
<body>
        <h5>Terms for testing:</h5>api query motivated pogrom get interlokutor dwucz≈Çonowe zdanie react-test-renderer 
        <br><br>
        <h5>Bookmarks:</h5>
        <script type="text/javascript">
                const bookmarklets2 = [
                        {
                                title: 'Skip YT Ads', 
                                type: 'iife',
                                href: 'setInterval(()=>{document.querySelector(".video-ads.ytp-ad-module").children.length ? document.querySelector("video").playbackRate = 16 : null;b=document.querySelector(".ytp-skip-ad-button"); b?b.click():null;}, 1000);',
                        },
                        {
                                title: 'Skip TVP', 
                                type: 'iife',
                                href: 'setInterval(() => document.querySelector(".ui-player-advert__info") ? document.querySelector("video[title=Advertisement]").playbackRate=16 : null, 1000)',
                        },
                        {
                                title: 'Cookies', 
                                type: 'plain',
                                href: 'Array.from(document.querySelectorAll(".fc-preference-slider > input[type=checkbox]")).forEach(e => e.checked = false);document.querySelector(".fc-confirm-choices").click();',
                        },
                        {
                                title: 'E-mail', 
                                type: 'js',
                                href: 'async function setClipboard(text) {const type = "text/plain"; const blob = new Blob([text], { type }); const data = [new ClipboardItem({ [type]: blob })]; await navigator.clipboard.write(data);} setClipboard("name@name.com");',
                        },
                        {
                                title: 'Translate', 
                                type: 'search',
                                href: 'https://pl.bab.la/slownik/angielski-polski/%s',
                        },
                        {
                                title: 'npm', 
                                type: 'search',
                                href: 'https://www.npmjs.com/package/%s',
                        },
                        {
                                title: 'npm search', 
                                type: 'search',
                                href: 'https://www.npmjs.com/search?q=%s',
                        },
                        {
                                title: 'sjp', 
                                type: 'search',
                                href: 'https://sjp.pwn.pl/szukaj/%s.html',
                        },
                ];
                const xhr = new XMLHttpRequest;
                xhr.responseType = 'document';
                xhr.onload = function()
                {
                        if (xhr.readyState === xhr.DONE && xhr.status === 200) {
                                const res = document.querySelector('#response');
                                res.innerHTML = '';
                                res.appendChild(xhr.response.querySelector('.page .column-wrapper .content'));
                                res.querySelector('.quick-result-entry:last-child').remove();
                        } else {
                                console.log('error', xhr.response);
                        }
                }
                const getTextSelection = () => {
                        return document.activeElement.getSelection();
                }
                const getTranslation = function(word){
                        xhr.open('get', 'https://pl.bab.la/slownik/angielski-polski/' + word);
                        xhr.send();
                }
                const stringify = (object) => {
                        return object
                        .toString()
                        .replace(/(?:\r\n|\r|\n)/g, ' ')
                        .replace(/ {2}/g, '');
                }
                const searchNow = function(engine, searchEngines) {
                        const selection = window.getSelection().toString();
                        const url = searchEngines[engine].replace('%s', selection);
                        window.open(url, 'Search ');
                }
                const insertAll = () => {
                        for (name in bookmarklets2) {
                                const item = bookmarklets2[name]
                                const link = document.createElement('a');
                                let func = '';
                                let href = 'javascript:';
                                switch(item.type){
                                        case 'search':
                                                func = stringify(searchNow);
                                                const searchEngines = bookmarklets2
                                                        .filter((item, index) => item.type === 'search')
                                                        .reduce((o, item) => Object.assign(o, {[item.title]: item.href}), {});
                                                const engines = JSON.stringify(searchEngines);
                                                link.target = '_blank';
                                                href += '(' + func + ')("' + item.title + '", ' + engines + ')';
                                                break;
                                        case 'js':
                                                href += item.href;
                                                break;
                                        case 'plain':
                                                href = item.href;
                                                break;
                                        case 'iife':
                                        default:
                                                href += `(function(){${stringify(item.href)}})()`;
                                }
                                link.innerHTML = item.title;
                                link.title = item.title;
                                link.href = href;
                                document.body.appendChild(link);
                                document.body.appendChild(document.createElement('br'));
                        }
                }
                insertAll();
        </script>
</body>
</html>
